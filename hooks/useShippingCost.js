import { useState, useEffect } from "react";

const zipCodesXalapa = [
  "91015",
  "91084",
  "91166",
  "91163",
  "91225",
  "91033",
  "91183",
  "91154",
  "91165",
  "91129",
  "91095",
  "91224",
  "91152",
  "91140",
  "91154",
  "91160",
  "91154",
  "91094",
  "91025",
  "91094",
  "91073",
  "91195",
  "91152",
  "91152",
  "91107",
  "91095",
  "91073",
  "91190",
  "91183",
  "91010",
  "91010",
  "91107",
  "91170",
  "91016",
  "91160",
  "91104",
  "91033",
  "91198",
  "91160",
  "91143",
  "91075",
  "91184",
  "91152",
  "91195",
  "91210",
  "91193",
  "91193",
  "91156",
  "91010",
  "91220",
  "91103",
  "91049",
  "91197",
  "91154",
  "91153",
  "91158",
  "91194",
  "91046",
  "91190",
  "91170",
  "91024",
  "91155",
  "91200",
  "91067",
  "91170",
  "91096",
  "91054",
  "91216",
  "91216",
  "91013",
  "91166",
  "91040",
  "91143",
  "91045",
  "91015",
  "91107",
  "91014",
  "91027",
  "91016",
  "91191",
  "91013",
  "91015",
  "91207",
  "91157",
  "91027",
  "91026",
  "91013",
  "91090",
  "91197",
  "91153",
  "91197",
  "91203",
  "91205",
  "91184",
  "91047",
  "91013",
  "91070",
  "91053",
  "91220",
  "91196",
  "91197",
  "91210",
  "91020",
  "91163",
  "91156",
  "91184",
  "91164",
  "91015",
  "91195",
  "91185",
  "91056",
  "91153",
  "91014",
  "91198",
  "91184",
  "91057",
  "91060",
  "91095",
  "91095",
  "91073",
  "91183",
  "91067",
  "91093",
  "91095",
  "91166",
  "91097",
  "91045",
  "91207",
  "91023",
  "91179",
  "91015",
  "91020",
  "91133",
  "91210",
  "91153",
  "91154",
  "91152",
  "91107",
  "91016",
  "91016",
  "91180",
  "91030",
  "91104",
  "91060",
  "91066",
  "91083",
  "91060",
  "91053",
  "91090",
  "91008",
  "91154",
  "91193",
  "91053",
  "91106",
  "91095",
  "91216",
  "91193",
  "91153",
  "91140",
  "91025",
  "91023",
  "91227",
  "91075",
  "91183",
  "91080",
  "91140",
  "91156",
  "91028",
  "91017",
  "91154",
  "91018",
  "91227",
  "91065",
  "91193",
  "91195",
  "91095",
  "91220",
  "91193",
  "91095",
  "91009",
  "91193",
  "91069",
  "91120",
  "91194",
  "91098",
  "91193",
  "91152",
  "91107",
  "91174",
  "91200",
  "91064",
  "91203",
  "91173",
  "91027",
  "91164",
  "91063",
  "91184",
  "91198",
  "91150",
  "91123",
  "91153",
  "91119",
  "91098",
  "91196",
  "91025",
  "91030",
  "91023",
  "91097",
  "91024",
  "91174",
  "91010",
  "91105",
  "91015",
  "91166",
  "91093",
  "91193",
  "91184",
  "91010",
  "91227",
  "91024",
  "91037",
  "91018",
  "91152",
  "91097",
  "91026",
  "91040",
  "91026",
  "91107",
  "91183",
  "91027",
  "91070",
  "91097",
  "91114",
  "91157",
  "91045",
  "91018",
  "91173",
  "91166",
  "91055",
  "91150",
  "91194",
  "91196",
  "91152",
  "91217",
  "91103",
  "91157",
  "91025",
  "91018",
  "91096",
  "91133",
  "91016",
  "91023",
  "91055",
  "91197",
  "91190",
  "91153",
  "91014",
  "91130",
  "91097",
  "91225",
  "91224",
  "91048",
  "91017",
  "91160",
  "91056",
  "91156",
  "91055",
  "91153",
  "91013",
  "91194",
  "91193",
  "91225",
  "91014",
  "91216",
  "91018",
  "91040",
  "91098",
  "91154",
  "91152",
  "91190",
  "91060",
  "91017",
  "91010",
  "91160",
  "91123",
  "91027",
  "91073",
  "91152",
  "91083",
  "91150",
  "91174",
  "91098",
  "91157",
  "91110",
  "91084",
  "91193",
  "91143",
  "91157",
  "91157",
  "91017",
];

const zipCodesCoatepec = [
  "91537",
  "91559",
  "91569",
  "91549",
  "91565",
  "91530",
  "91581",
  "91505",
  "91528",
  "91575",
  "91559",
  "91540",
  "91529",
  "91500",
  "91520",
  "91575",
];

const zipCodesBanderilla = [
  "91300",
  "91302",
  "91303",
  "91304",
  "91305",
  "91306",
  "91307",
];

export function useShippingCost(zipCode, subTotal) {
  const [deliveryCities, setDeliveryCities] = useState([
    "Xalapa",
    "Coatepec",
    "Banderilla",
  ]);
  const [cost, setCost] = useState(0);

  useEffect(() => {
    if (zipCode.length >= 5) {
      if (zipCodesXalapa.includes(zipCode)) {
        if (subTotal > 200) {
          setCost(0);
        } else {
          setCost(50);
        }
        setDeliveryCities(["Xalapa"]);
      } else if (zipCodesCoatepec.includes(zipCode)) {
        setDeliveryCities(["Coatepec"]);
        setCost(75);
      } else if (zipCodesBanderilla.includes(zipCode)) {
        setDeliveryCities(["Banderilla"]);
        setCost(75);
      } else if (zipCode === "pickUp") {
        setCost(0);
        setDeliveryCities(["Xalapa", "Coatepec", "Banderilla"]);
      } else {
        setCost(75);
        setDeliveryCities(["contact"]);
      }
    } else {
      setCost(50);
      setDeliveryCities(["Xalapa", "Coatepec", "Banderilla"]);
    }
  }, [zipCode, subTotal]);

  return [cost, deliveryCities];
}
